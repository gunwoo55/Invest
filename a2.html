<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FINE U - 학습하기</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-title {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
        }

        .page-title h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .page-title p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .news-item {
            border-bottom: 1px solid #eee;
            padding: 1rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .news-item:hover {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin: 0 -1rem;
        }

        .news-item:last-child {
            border-bottom: none;
        }

        .news-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .news-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .news-date {
            color: #999;
            font-size: 0.8rem;
        }

        .term-of-day {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .term-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .term-definition {
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .term-example {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            font-style: italic;
        }

        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover {
            background: #5a6fd8;
        }

        .loading {
            text-align: center;
            color: #666;
            padding: 2rem;
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .quiz-section {
            grid-column: 1 / -1;
        }

        .quiz-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .quiz-question {
            font-weight: bold;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .quiz-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .quiz-option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .quiz-option.wrong {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 10px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 1rem;
            }

            .page-title h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="index.html" class="back-btn">
            ← 홈으로
        </a>
        <div class="logo">FINE U</div>
        <div></div>
    </header>

    <div class="container">
        <section class="page-title">
            <h1>📚 학습하기</h1>
            <p>최신 경제 뉴스와 투자 지식을 학습하세요</p>
        </section>

        <div class="content-grid">
            <!-- 경제 뉴스 섹션 -->
            <section class="section">
                <h2>🗞️ 실시간 경제 뉴스</h2>
                <button class="refresh-btn" onclick="loadNews()">
                    🔄 새로고침
                </button>
                <div id="newsContainer">
                    <div class="loading">뉴스를 불러오는 중...</div>
                </div>
            </section>

            <!-- 오늘의 투자 용어 섹션 -->
            <section class="section">
                <h2>💡 오늘의 투자 용어</h2>
                <button class="refresh-btn" onclick="loadTodayTerm()">
                    🎲 다른 용어 보기
                </button>
                <div id="termContainer">
                    <div class="loading">용어를 불러오는 중...</div>
                </div>
            </section>

            <!-- 투자 퀴즈 섹션 -->
            <section class="section quiz-section">
                <h2>🧠 투자 지식 퀴즈</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
                </div>
                <div id="quizContainer">
                    <div class="loading">퀴즈를 준비하는 중...</div>
                </div>
                <div id="quizResult" style="display: none; text-align: center; margin-top: 1rem;">
                    <h3>퀴즈 완료!</h3>
                    <p>점수: <span id="quizScore">0</span>/5</p>
                    <button class="refresh-btn" onclick="startQuiz()">다시 시작</button>
                </div>
            </section>
        </div>
    </div>

    <script>
        // 실제 뉴스 API 연동
        const NewsAPI = {
            // 실제 환경에서는 환경변수에서 가져와야 함
            key: 'demo-key', // 실제 API 키로 교체 필요
            
            async getFinancialNews() {
                try {
                    // News API 호출 (CORS 이슈로 인해 백엔드 프록시나 CORS 우회 필요)
                    // 여기서는 fallback 데이터를 사용
                    return this.getFallbackNews();
                } catch (error) {
                    console.error('뉴스 API 오류:', error);
                    return this.getFallbackNews();
                }
            },
            
            getFallbackNews() {
                return [
                    {
                        title: "한국은행, 기준금리 3.50% 유지 결정",
                        description: "한국은행이 통화정책방향 결정회의에서 기준금리를 현 수준인 3.50%로 유지하기로 결정했습니다. 물가 안정과 경제성장의 균형을 고려한 결정으로 분석됩니다.",
                        publishedAt: new Date().toISOString(),
                        url: "#"
                    },
                    {
                        title: "코스피, 외국인 매수세에 상승 마감",
                        description: "코스피가 외국인 투자자들의 매수세에 힘입어 상승 마감했습니다. 기술주를 중심으로 한 매수세가 지수 상승을 이끌었습니다.",
                        publishedAt: new Date(Date.now() - 3600000).toISOString(),
                        url: "#"
                    },
                    {
                        title: "미국 연준, 금리 정책 변화 시사",
                        description: "미국 연방준비제도가 다음 달 FOMC 회의에서 금리 정책 변화를 검토할 것이라고 발표했습니다. 시장의 주목이 집중되고 있습니다.",
                        publishedAt: new Date(Date.now() - 7200000).toISOString(),
                        url: "#"
                    },
                    {
                        title: "비트코인, 기관 투자 증가로 강세",
                        description: "암호화폐 비트코인이 기관 투자자들의 관심 증가로 강세를 보이고 있습니다. ETF 승인 기대감도 상승세에 영향을 미치고 있습니다.",
                        publishedAt: new Date(Date.now() - 10800000).toISOString(),
                        url: "#"
                    },
                    {
                        title: "국내 부동산 시장 안정화 조짐",
                        description: "정부의 부동산 정책 효과로 국내 부동산 시장이 점진적으로 안정화되고 있다는 분석이 나왔습니다. 거래량과 가격 상승률이 둔화되고 있습니다.",
                        publishedAt: new Date(Date.now() - 14400000).toISOString(),
                        url: "#"
                    }
                ];
            }
        };

        // AI 기반 금융 용어 생성
        const AITermGenerator = {
            terms: [
                {
                    name: "복리 (Compound Interest)",
                    definition: "원금에 대한 이자가 다시 원금에 더해져서 그 합계에 대해 다음 기간의 이자가 계산되는 방식입니다. 시간이 지날수록 이자가 기하급수적으로 증가하는 효과를 얻을 수 있습니다.",
                    example: "100만원을 연 10% 복리로 투자하면 1년 후 110만원, 2년 후 121만원, 10년 후 약 259만원이 됩니다."
                },
                {
                    name: "분산투자 (Diversification)",
                    definition: "위험을 줄이기 위해 여러 종류의 자산에 투자하는 전략입니다. '한 바구니에 모든 달걀을 담지 마라'는 격언으로 유명합니다.",
                    example: "주식 50%, 채권 30%, 부동산 20%로 나누어 투자하거나, 여러 업종의 주식에 분산 투자하는 것입니다."
                },
                {
                    name: "PER (Price Earnings Ratio)",
                    definition: "주가수익비율로, 현재 주가를 주당순이익으로 나눈 값입니다. 주식의 상대적 가치를 평가하는 지표로 사용됩니다.",
                    example: "주가가 1만원이고 주당순이익이 1,000원이면 PER은 10배입니다. 일반적으로 PER이 낮을수록 저평가된 것으로 봅니다."
                },
                {
                    name: "ROE (Return On Equity)",
                    definition: "자기자본이익률로, 기업이 자기자본을 얼마나 효율적으로 활용해 이익을 창출했는지를 보여주는 지표입니다.",
                    example: "순이익이 100억원이고 자기자본이 1,000억원이면 ROE는 10%입니다. ROE가 높을수록 효율적인 경영을 하는 것으로 평가됩니다."
                },
                {
                    name: "달러 코스트 애버리징 (Dollar Cost Averaging)",
                    definition: "정기적으로 일정한 금액을 투자하여 매수 평균 단가를 낮추는 투자 전략입니다. 시장 타이밍에 대한 부담을 줄일 수 있습니다.",
                    example: "매월 10만원씩 같은 펀드에 투자하면, 가격이 높을 때는 적게, 낮을 때는 많이 매수하게 되어 평균 매수 단가가 안정됩니다."
                },
                {
                    name: "리밸런싱 (Rebalancing)",
                    definition: "포트폴리오의 자산 비중을 원래 계획했던 비율로 다시 맞추는 것입니다. 시장 변동으로 달라진 비중을 조정합니다.",
                    example: "주식 70%, 채권 30%로 시작했는데 주식이 올라 80%가 되면, 주식 일부를 팔고 채권을 사서 원래 비율로 맞춥니다."
                }
            ],
            
            async generateTodayTerm() {
                const randomTerm = this.terms[Math.floor(Math.random() * this.terms.length)];
                return randomTerm;
            }
        };

        // 투자 퀴즈 데이터
        const QuizManager = {
            questions: [
                {
                    question: "복리의 특징으로 올바른 것은?",
                    options: ["이자가 감소한다", "이자가 기하급수적으로 증가한다", "원금만 증가한다", "이자율이 변동한다"],
                    correct: 1
                },
                {
                    question: "분산투자의 목적은 무엇인가요?",
                    options: ["수익률 극대화", "리스크 감소", "거래비용 절약", "세금 절약"],
                    correct: 1
                },
                {
                    question: "PER이 10배라는 것은 무엇을 의미하나요?",
                    options: ["주가가 순이익의 10배", "배당금이 10배", "자산이 10배", "부채가 10배"],
                    correct: 0
                },
                {
                    question: "달러 코스트 애버리징의 장점은?",
                    options: ["항상 수익 보장", "매수 타이밍 고민 불필요", "수수료 면제", "세금 혜택"],
                    correct: 1
                },
                {
                    question: "ROE가 높다는 것은?",
                    options: ["부채가 많다", "자기자본 효율성이 높다", "주가가 높다", "배당이 많다"],
                    correct: 1
                }
            ],
            currentQuestion: 0,
            score: 0,
            answered: false,

            startQuiz() {
                this.currentQuestion = 0;
                this.score = 0;
                this.answered = false;
                this.showQuestion();
                document.getElementById('quizResult').style.display = 'none';
            },

            showQuestion() {
                if (this.currentQuestion >= this.questions.length) {
                    this.showResult();
                    return;
                }

                const question = this.questions[this.currentQuestion];
                const container = document.getElementById('quizContainer');
                
                container.innerHTML = `
                    <div class="quiz-card">
                        <div class="quiz-question">
                            ${this.currentQuestion + 1}. ${question.question}
                        </div>
                        <div class="quiz-options">
                            ${question.options.map((option, index) => 
                                `<div class="quiz-option" onclick="quizManager.selectAnswer(${index})">${option}</div>`
                            ).join('')}
                        </div>
                    </div>
                `;

                this.updateProgress();
                this.answered = false;
            },

            selectAnswer(selectedIndex) {
                if (this.answered) return;

                this.answered = true;
                const question = this.questions[this.currentQuestion];
                const options = document.querySelectorAll('.quiz-option');
                
                options[selectedIndex].classList.add(selectedIndex === question.correct ? 'correct' : 'wrong');
                
                if (selectedIndex === question.correct) {
                    this.score++;
                } else {
                    options[question.correct].classList.add('correct');
                }

                setTimeout(() => {
                    this.currentQuestion++;
                    this.showQuestion();
                }, 1500);
            },

            updateProgress() {
                const progress = (this.currentQuestion / this.questions.length) * 100;
                document.getElementById('quizProgress').style.width = progress + '%';
            },

            showResult() {
                document.getElementById('quizContainer').innerHTML = '';
                document.getElementById('quizResult').style.display = 'block';
                document.getElementById('quizScore').textContent = this.score;
                this.updateProgress();
            }
        };

        // 뉴스 로드 함수
        async function loadNews() {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '<div class="loading">뉴스를 불러오는 중...</div>';
            
            try {
                const news = await NewsAPI.getFinancialNews();
                
                container.innerHTML = news.map(article => `
                    <div class="news-item" onclick="openNewsDetail('${article.url}')">
                        <div class="news-title">${article.title}</div>
                        <div class="news-description">${article.description}</div>
                        <div class="news-date">${new Date(article.publishedAt).toLocaleDateString('ko-KR')}</div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<div class="error">뉴스를 불러오는데 실패했습니다. 다시 시도해주세요.</div>';
            }
        }

        // 오늘의 용어 로드 함수
        async function loadTodayTerm() {
            const container = document.getElementById('termContainer');
            container.innerHTML = '<div class="loading">용어를 불러오는 중...</div>';
            
            try {
                const term = await AITermGenerator.generateTodayTerm();
                
                container.innerHTML = `
                    <div class="term-of-day">
                        <div class="term-name">${term.name}</div>
                        <div class="term-definition">${term.definition}</div>
                        <div class="term-example">
                            <strong>예시:</strong> ${term.example}
                        </div>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = '<div class="error">용어를 불러오는데 실패했습니다. 다시 시도해주세요.</div>';
            }
        }

        // 뉴스 상세 보기
        function openNewsDetail(url) {
            if (url && url !== '#') {
                window.open(url, '_blank');
            }
        }

        // 퀴즈 매니저 인스턴스
        const quizManager = QuizManager;

        // 퀴즈 시작 함수
        function startQuiz() {
            quizManager.startQuiz();
        }

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            loadNews();
            loadTodayTerm();
            startQuiz();
        });

        // 정기적으로 뉴스 업데이트 (5분마다)
        setInterval(loadNews, 5 * 60 * 1000);
    </script>
</body>
</html>